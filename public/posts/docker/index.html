<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Docker | Pratik Amatya</title>
<meta name="keywords" content="">
<meta name="description" content="Docker

A container platform that allows you to build, test &amp; deploy applications quickly
Dockerfile

A set of instructions for creating an image
Image

A packaged application and its dependencies
Container

A running instance of that image executing the application in an isolated environment
Docker Volume

A persistent storage mechanism that allows containers to store and share data beyond their lifecycle.
Docker Compose

A tool for defining and managing multi-container applications using a YAML configuration file.">
<meta name="author" content="map[homepage:https://github.com/PratikAmatya name:Pratik Amatya]">
<link rel="canonical" href="https://pratikamatya.github.io/docs/posts/docker/">
<link crossorigin="anonymous" href="../../docs/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css" integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://pratikamatya.github.io/docs/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://pratikamatya.github.io/docs/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://pratikamatya.github.io/docs/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://pratikamatya.github.io/docs/apple-touch-icon.png">
<link rel="mask-icon" href="https://pratikamatya.github.io/docs/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://pratikamatya.github.io/docs/posts/docker/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://pratikamatya.github.io/docs/posts/docker/">
  <meta property="og:site_name" content="Pratik Amatya">
  <meta property="og:title" content="Docker">
  <meta property="og:description" content="Docker A container platform that allows you to build, test &amp; deploy applications quickly
Dockerfile A set of instructions for creating an image
Image A packaged application and its dependencies
Container A running instance of that image executing the application in an isolated environment
Docker Volume A persistent storage mechanism that allows containers to store and share data beyond their lifecycle.
Docker Compose A tool for defining and managing multi-container applications using a YAML configuration file.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-12-03T15:02:46+05:45">
    <meta property="article:modified_time" content="2023-12-03T15:02:46+05:45">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Docker">
<meta name="twitter:description" content="Docker

A container platform that allows you to build, test &amp; deploy applications quickly
Dockerfile

A set of instructions for creating an image
Image

A packaged application and its dependencies
Container

A running instance of that image executing the application in an isolated environment
Docker Volume

A persistent storage mechanism that allows containers to store and share data beyond their lifecycle.
Docker Compose

A tool for defining and managing multi-container applications using a YAML configuration file.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://pratikamatya.github.io/docs/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Docker",
      "item": "https://pratikamatya.github.io/docs/posts/docker/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Docker",
  "name": "Docker",
  "description": "Docker A container platform that allows you to build, test \u0026amp; deploy applications quickly\nDockerfile A set of instructions for creating an image\nImage A packaged application and its dependencies\nContainer A running instance of that image executing the application in an isolated environment\nDocker Volume A persistent storage mechanism that allows containers to store and share data beyond their lifecycle.\nDocker Compose A tool for defining and managing multi-container applications using a YAML configuration file.\n",
  "keywords": [
    
  ],
  "articleBody": "Docker A container platform that allows you to build, test \u0026 deploy applications quickly\nDockerfile A set of instructions for creating an image\nImage A packaged application and its dependencies\nContainer A running instance of that image executing the application in an isolated environment\nDocker Volume A persistent storage mechanism that allows containers to store and share data beyond their lifecycle.\nDocker Compose A tool for defining and managing multi-container applications using a YAML configuration file.\nLayer Caching A mechanism that speeds up Docker builds by reusing unchanged layers from previous builds, reducing build time and improving efficiency.\n# Pull docker image from DockerHub docker pull IMAGE_NAME:TAG Steps Create dockerfile This is a simple example of Dockerfile for an express API Here, RUN is used to specify commands which runs while the docker image is being built\nWhile, CMD is used to specify commands which runs while the docker container is run\nFROM node:17-alpine WORKDIR /app # Copy package files first for caching COPY package*.json ./ RUN npm install # Copy app source COPY . . EXPOSE 3000 # Expose port and start CMD [\"node\",\"app.js\"] Build the image # Build the docker image from docker file # . specifies the relative path to the docker file form the terminal # The tag is optional docker build -t IMAGE_NAME:TAG_NAME . docker build -t myapp:v1 . Run the image # Here, # -d mean detached mode : run in the background # -p 4000:3000 means map the port 4000 of your host machine # to the port 3000 inside the container docker run -d -p 4000:3000 --name acme-api acme-api:latest sudo docker run -d -p 27017:27017 7ee26c8012da # All the associated commands to images # Run docker image docker run IMAGE_NAME:TAG docker run ubuntu:latest # Using this does not expose the port to the host machine docker run --name myapp_c1 myapp # Runs container in the background : -d docker run -d node:latest # Run and interact with the container : -it docker run -it node sudo docker run -d -p 27017:27017 7ee26c8012da To stop a container # Stop docker container sudo docker stop CONTAINER_NAME_or_ID # Stops all the containers sudo docker stop $(sudo docker ps -q) To start or stop container (No need to map the ports again or run on detached mode while starting the container)\n# List all the images docker images # List all the running containers docker ps # List containers including the stopped ones docker ps -a docker start myapp docker stop myapp To remove images and container # Lists the built images docker images docker image rm myapp4 docker rmi myapp4 # -f option forces the deletion of image even if a container uses the image docker image rm myapp4 -f # Specify the name of the container sudo docker container rm app_c2 # Remove all the docker images sudo docker rmi $(sudo docker images -q) Main command to remove all images and containers (WARNING) docker system prune -a Docker Volumes FROM node:17-alpine RUN npm install -g nodemon WORKDIR /app COPY package.json . RUN npm install COPY . . EXPOSE 3000 CMD [\"npm\",\"run\",\"dev\"] Here, –rm Remove or Delete Container once its stopped -v to map the api folder in the host machine to the /app folder in the container This maps the files of host machine to the directy in the container\ndocker run --name myapp -p 3000:4000 -d --rm -v /home/pratik/work/api:/app -v /app/node_modules myimage:nodemon Docker Compose docker-compose up # Deletes the images and volume as well docker-compose down --rmi all -v Docker Compose File version: \"1.0\" services: api: build: ./api container_name: test_api ports: - \"4000:4000\" volumes: - ./api:/app - ./app/node_modules web: build: ./web container_name: web ports: - \"4000:4000\" volumes: - ./web:/app - ./web/node_modules stdin_open: true tty: true GitHub Action YAML name: CD for Production on: push: branches: [\"main\"] jobs: deploy: runs-on: ubuntu-latest steps: - name: Checkout code uses: actions/checkout@v3 - name: Deploy to Production run: | docker-compose -f docker-compose.prod.yml build docker-compose -f docker-compose.prod.yml up -d ",
  "wordCount" : "660",
  "inLanguage": "en",
  "datePublished": "2023-12-03T15:02:46+05:45",
  "dateModified": "2023-12-03T15:02:46+05:45",
  "author":{
    "@type": "Person",
    "name": {"homepage":"https://github.com/PratikAmatya","name":"Pratik Amatya"}
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://pratikamatya.github.io/docs/posts/docker/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pratik Amatya",
    "logo": {
      "@type": "ImageObject",
      "url": "https://pratikamatya.github.io/docs/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://pratikamatya.github.io/docs/" accesskey="h" title="Pratik Amatya (Alt + H)">Pratik Amatya</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Docker
    </h1>
    <div class="post-meta"><span title='2023-12-03 15:02:46 +0545 +0545'>December 3, 2023</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;660 words&nbsp;·&nbsp;map[homepage:https://github.com/PratikAmatya name:Pratik Amatya]

</div>
  </header> 
  <div class="post-content"><h4 id="docker">Docker<a hidden class="anchor" aria-hidden="true" href="#docker">#</a></h4>
<blockquote>
<p>A container platform that allows you to build, test &amp; deploy applications quickly</p></blockquote>
<h4 id="dockerfile">Dockerfile<a hidden class="anchor" aria-hidden="true" href="#dockerfile">#</a></h4>
<blockquote>
<p>A set of instructions for creating an image</p></blockquote>
<h4 id="image">Image<a hidden class="anchor" aria-hidden="true" href="#image">#</a></h4>
<blockquote>
<p>A packaged application and its dependencies</p></blockquote>
<h4 id="container">Container<a hidden class="anchor" aria-hidden="true" href="#container">#</a></h4>
<blockquote>
<p>A running instance of that image executing the application in an isolated environment</p></blockquote>
<h4 id="docker-volume">Docker Volume<a hidden class="anchor" aria-hidden="true" href="#docker-volume">#</a></h4>
<blockquote>
<p>A persistent storage mechanism that allows containers to store and share data beyond their lifecycle.</p></blockquote>
<h4 id="docker-compose">Docker Compose<a hidden class="anchor" aria-hidden="true" href="#docker-compose">#</a></h4>
<blockquote>
<p>A tool for defining and managing multi-container applications using a YAML configuration file.</p></blockquote>
<h4 id="layer-caching">Layer Caching<a hidden class="anchor" aria-hidden="true" href="#layer-caching">#</a></h4>
<blockquote>
<p>A mechanism that speeds up Docker builds by reusing unchanged layers from previous builds, reducing build time and improving efficiency.</p></blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Pull docker image from DockerHub</span>
</span></span><span style="display:flex;"><span>docker pull IMAGE_NAME:TAG
</span></span></code></pre></div><h4 id="steps">Steps<a hidden class="anchor" aria-hidden="true" href="#steps">#</a></h4>
<ul>
<li>Create dockerfile</li>
</ul>
<h4 id="this-is-a-simple-example-of-dockerfile-for-an-express-api">This is a simple example of Dockerfile for an express API<a hidden class="anchor" aria-hidden="true" href="#this-is-a-simple-example-of-dockerfile-for-an-express-api">#</a></h4>
<blockquote>
<p>Here, RUN is used to specify commands which runs while the docker image is being built</p>
<p>While, CMD is used to specify commands which runs while the docker container is run</p></blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> node:17-alpine</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span><span style="color:#e6db74"> /app</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Copy package files first for caching</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> package*.json ./<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> npm install<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Copy app source</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> . .<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">EXPOSE</span><span style="color:#e6db74"> 3000</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Expose port and start</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">CMD</span> [<span style="color:#e6db74">&#34;node&#34;</span>,<span style="color:#e6db74">&#34;app.js&#34;</span>]<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h4 id="build-the-image">Build the image<a hidden class="anchor" aria-hidden="true" href="#build-the-image">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Build the docker image from docker file</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># . specifies the relative path to the docker file form the terminal</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The tag is optional</span>
</span></span><span style="display:flex;"><span>docker build -t IMAGE_NAME:TAG_NAME .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker build -t myapp:v1 .
</span></span></code></pre></div><h4 id="run-the-image">Run the image<a hidden class="anchor" aria-hidden="true" href="#run-the-image">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Here,</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -d mean detached mode : run in the background</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -p 4000:3000 means map the port 4000 of your host machine</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># to the port 3000 inside the container</span>
</span></span><span style="display:flex;"><span>docker run -d -p 4000:3000 --name acme-api acme-api:latest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo docker run -d -p 27017:27017 7ee26c8012da
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># All the associated commands to images</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run docker image</span>
</span></span><span style="display:flex;"><span>docker run IMAGE_NAME:TAG
</span></span><span style="display:flex;"><span>docker run ubuntu:latest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Using this does not expose the port to the host machine</span>
</span></span><span style="display:flex;"><span>docker run --name myapp_c1 myapp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Runs container in the background : -d</span>
</span></span><span style="display:flex;"><span>docker run -d node:latest
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Run and interact with the container : -it</span>
</span></span><span style="display:flex;"><span>docker run -it node
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo docker run -d -p 27017:27017 7ee26c8012da
</span></span></code></pre></div><h4 id="to-stop-a-container">To stop a container<a hidden class="anchor" aria-hidden="true" href="#to-stop-a-container">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Stop docker container</span>
</span></span><span style="display:flex;"><span>sudo docker stop CONTAINER_NAME_or_ID
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Stops all the containers</span>
</span></span><span style="display:flex;"><span>sudo docker stop <span style="color:#66d9ef">$(</span>sudo docker ps -q<span style="color:#66d9ef">)</span>
</span></span></code></pre></div><h4 id="to-start-or-stop-container">To start or stop container<a hidden class="anchor" aria-hidden="true" href="#to-start-or-stop-container">#</a></h4>
<blockquote>
<p>(No need to map the ports again or run on detached mode while starting the container)</p></blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># List all the images</span>
</span></span><span style="display:flex;"><span>docker images
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List all the running containers</span>
</span></span><span style="display:flex;"><span>docker ps
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># List containers including the stopped ones</span>
</span></span><span style="display:flex;"><span>docker ps -a
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker start myapp
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker stop myapp
</span></span></code></pre></div><h4 id="to-remove-images-and-container">To remove images and container<a hidden class="anchor" aria-hidden="true" href="#to-remove-images-and-container">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Lists the built images</span>
</span></span><span style="display:flex;"><span>docker images
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker image rm myapp4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker rmi myapp4
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># -f option forces the deletion of image even if a container uses the image</span>
</span></span><span style="display:flex;"><span>docker image rm myapp4 -f
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Specify the name of the container</span>
</span></span><span style="display:flex;"><span>sudo docker container rm app_c2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Remove all the docker images</span>
</span></span><span style="display:flex;"><span>sudo docker rmi <span style="color:#66d9ef">$(</span>sudo docker images -q<span style="color:#66d9ef">)</span>
</span></span></code></pre></div><h4 id="main-command-to-remove-all-images-and-containers-warning">Main command to remove all images and containers (WARNING)<a hidden class="anchor" aria-hidden="true" href="#main-command-to-remove-all-images-and-containers-warning">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker system prune -a
</span></span></code></pre></div><h4 id="docker-volumes">Docker Volumes<a hidden class="anchor" aria-hidden="true" href="#docker-volumes">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-dockerfile" data-lang="dockerfile"><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> node:17-alpine</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> npm install -g nodemon<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span><span style="color:#e6db74"> /app</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> package.json .<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> npm install<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> . .<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">EXPOSE</span><span style="color:#e6db74"> 3000</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">CMD</span> [<span style="color:#e6db74">&#34;npm&#34;</span>,<span style="color:#e6db74">&#34;run&#34;</span>,<span style="color:#e6db74">&#34;dev&#34;</span>]<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><blockquote>
<p>Here,
&ndash;rm Remove or Delete Container once its stopped
-v to map the api folder in the host machine to the /app folder in the container
This maps the files of host machine to the directy in the container</p></blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker run --name myapp -p 3000:4000 -d --rm -v /home/pratik/work/api:/app -v /app/node_modules myimage:nodemon
</span></span></code></pre></div><h4 id="docker-compose-1">Docker Compose<a hidden class="anchor" aria-hidden="true" href="#docker-compose-1">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>docker-compose up
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Deletes the images and volume as well</span>
</span></span><span style="display:flex;"><span>docker-compose down --rmi all -v
</span></span></code></pre></div><h4 id="docker-compose-file">Docker Compose File<a hidden class="anchor" aria-hidden="true" href="#docker-compose-file">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">version</span>: <span style="color:#e6db74">&#34;1.0&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">services</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">api</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>: <span style="color:#ae81ff">./api</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">test_api</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;4000:4000&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./api:/app</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./app/node_modules</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">web</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">build</span>: <span style="color:#ae81ff">./web</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">container_name</span>: <span style="color:#ae81ff">web</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">ports</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#e6db74">&#34;4000:4000&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">volumes</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./web:/app</span>
</span></span><span style="display:flex;"><span>      - <span style="color:#ae81ff">./web/node_modules</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">stdin_open</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">tty</span>: <span style="color:#66d9ef">true</span>
</span></span></code></pre></div><h4 id="github-action-yaml">GitHub Action YAML<a hidden class="anchor" aria-hidden="true" href="#github-action-yaml">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">name</span>: <span style="color:#ae81ff">CD for Production</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">on</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">push</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">branches</span>: [<span style="color:#e6db74">&#34;main&#34;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">jobs</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">deploy</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">runs-on</span>: <span style="color:#ae81ff">ubuntu-latest</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">steps</span>:
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Checkout code</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">uses</span>: <span style="color:#ae81ff">actions/checkout@v3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">Deploy to Production</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">run</span>: |<span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          docker-compose -f docker-compose.prod.yml build
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">          docker-compose -f docker-compose.prod.yml up -d</span>
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://pratikamatya.github.io/docs/posts/nginx-config/">
    <span class="title">« Prev</span>
    <br>
    <span>Nginx Sample Configs</span>
  </a>
  <a class="next" href="https://pratikamatya.github.io/docs/posts/regex-cheatsheet/">
    <span class="title">Next »</span>
    <br>
    <span>Regex Cheatsheet</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://pratikamatya.github.io/docs/">Pratik Amatya</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
